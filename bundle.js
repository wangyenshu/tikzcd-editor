!function(e){var t={};function n(o){if(t[o])return t[o].exports;var r=t[o]={i:o,l:!1,exports:{}};return e[o].call(r.exports,r,r.exports,n),r.l=!0,r.exports}n.m=e,n.c=t,n.d=function(e,t,o){n.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:o})},n.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},n.t=function(e,t){if(1&t&&(e=n(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var o=Object.create(null);if(n.r(o),Object.defineProperty(o,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var r in e)n.d(o,r,function(t){return e[t]}.bind(null,r));return o},n.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return n.d(t,"a",t),t},n.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},n.p="",n(n.s=7)}([function(e,t){var n,o,r,i,l,a,u,c={},s=[],p=/acit|ex(?:s|g|n|p|$)|rph|grid|ows|mnc|ntw|ine[ch]|zoo|^ord/i;function f(e,t){for(var n in t)e[n]=t[n];return e}function h(e){var t=e.parentNode;t&&t.removeChild(e)}function d(e,t,n){var o,r=arguments,i={};for(o in t)"key"!==o&&"ref"!==o&&(i[o]=t[o]);if(arguments.length>3)for(n=[n],o=3;o<arguments.length;o++)n.push(r[o]);if(null!=n&&(i.children=n),"function"==typeof e&&null!=e.defaultProps)for(o in e.defaultProps)void 0===i[o]&&(i[o]=e.defaultProps[o]);return y(e,i,t&&t.key,t&&t.ref)}function y(e,t,o,r){var i={type:e,props:t,key:o,ref:r,__k:null,__:null,__b:0,__e:null,__d:null,__c:null,constructor:void 0};return n.vnode&&n.vnode(i),i}function b(e){return e.children}function m(e,t){this.props=e,this.context=t}function v(e,t){if(null==t)return e.__?v(e.__,e.__.__k.indexOf(e)+1):null;for(var n;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e)return n.__e;return"function"==typeof e.type?v(e):null}function g(e){var t,n;if(null!=(e=e.__)&&null!=e.__c){for(e.__e=e.__c.base=null,t=0;t<e.__k.length;t++)if(null!=(n=e.__k[t])&&null!=n.__e){e.__e=e.__c.base=n.__e;break}return g(e)}}function w(e){(!e.__d&&(e.__d=!0)&&1===r.push(e)||l!==n.debounceRendering)&&((l=n.debounceRendering)||i)(_)}function _(){var e,t,n,o,i,l,a;for(r.sort((function(e,t){return t.__v.__b-e.__v.__b}));e=r.pop();)e.__d&&(n=void 0,o=void 0,l=(i=(t=e).__v).__e,(a=t.__P)&&(n=[],o=P(a,i,f({},i),t.__n,void 0!==a.ownerSVGElement,null,n,null==l?v(i):l),A(n,i),o!=l&&g(i)))}function O(e,t,n,o,r,i,l,a,u){var p,f,d,y,b,m,g,w=n&&n.__k||s,_=w.length;if(a==c&&(a=null!=i?i[0]:_?v(n,0):null),p=0,t.__k=j(t.__k,(function(n){if(null!=n){if(n.__=t,n.__b=t.__b+1,null===(d=w[p])||d&&n.key==d.key&&n.type===d.type)w[p]=void 0;else for(f=0;f<_;f++){if((d=w[f])&&n.key==d.key&&n.type===d.type){w[f]=void 0;break}d=null}if(y=P(e,n,d=d||c,o,r,i,l,a,u),(f=n.ref)&&d.ref!=f&&(g||(g=[]),d.ref&&g.push(d.ref,null,n),g.push(f,n.__c||y,n)),null!=y){if(null==m&&(m=y),null!=n.__d)y=n.__d,n.__d=null;else if(i==d||y!=a||null==y.parentNode){e:if(null==a||a.parentNode!==e)e.appendChild(y);else{for(b=a,f=0;(b=b.nextSibling)&&f<_;f+=2)if(b==y)break e;e.insertBefore(y,a)}"option"==t.type&&(e.value="")}a=y.nextSibling,"function"==typeof t.type&&(t.__d=y)}}return p++,n})),t.__e=m,null!=i&&"function"!=typeof t.type)for(p=i.length;p--;)null!=i[p]&&h(i[p]);for(p=_;p--;)null!=w[p]&&D(w[p],w[p]);if(g)for(p=0;p<g.length;p++)E(g[p],g[++p],g[++p])}function j(e,t,n){if(null==n&&(n=[]),null==e||"boolean"==typeof e)t&&n.push(t(null));else if(Array.isArray(e))for(var o=0;o<e.length;o++)j(e[o],t,n);else n.push(t?t("string"==typeof e||"number"==typeof e?y(null,e,null,null):null!=e.__e||null!=e.__c?y(e.type,e.props,e.key,null):e):e);return n}function k(e,t,n){"-"===t[0]?e.setProperty(t,n):e[t]="number"==typeof n&&!1===p.test(t)?n+"px":null==n?"":n}function C(e,t,n,o,r){var i,l,a,u,c;if(r?"className"===t&&(t="class"):"class"===t&&(t="className"),"key"===t||"children"===t);else if("style"===t)if(i=e.style,"string"==typeof n)i.cssText=n;else{if("string"==typeof o&&(i.cssText="",o=null),o)for(l in o)n&&l in n||k(i,l,"");if(n)for(a in n)o&&n[a]===o[a]||k(i,a,n[a])}else"o"===t[0]&&"n"===t[1]?(u=t!==(t=t.replace(/Capture$/,"")),c=t.toLowerCase(),t=(c in e?c:t).slice(2),n?(o||e.addEventListener(t,S,u),(e.l||(e.l={}))[t]=n):e.removeEventListener(t,S,u)):"list"!==t&&"tagName"!==t&&"form"!==t&&"type"!==t&&!r&&t in e?e[t]=null==n?"":n:"function"!=typeof n&&"dangerouslySetInnerHTML"!==t&&(t!==(t=t.replace(/^xlink:?/,""))?null==n||!1===n?e.removeAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase()):e.setAttributeNS("http://www.w3.org/1999/xlink",t.toLowerCase(),n):null==n||!1===n?e.removeAttribute(t):e.setAttribute(t,n))}function S(e){this.l[e.type](n.event?n.event(e):e)}function P(e,t,o,r,i,l,a,u,c){var s,p,h,d,y,v,g,w,_,k,C=t.type;if(void 0!==t.constructor)return null;(s=n.__b)&&s(t);try{e:if("function"==typeof C){if(w=t.props,_=(s=C.contextType)&&r[s.__c],k=s?_?_.props.value:s.__:r,o.__c?g=(p=t.__c=o.__c).__=p.__E:("prototype"in C&&C.prototype.render?t.__c=p=new C(w,k):(t.__c=p=new m(w,k),p.constructor=C,p.render=M),_&&_.sub(p),p.props=w,p.state||(p.state={}),p.context=k,p.__n=r,h=p.__d=!0,p.__h=[]),null==p.__s&&(p.__s=p.state),null!=C.getDerivedStateFromProps&&(p.__s==p.state&&(p.__s=f({},p.__s)),f(p.__s,C.getDerivedStateFromProps(w,p.__s))),d=p.props,y=p.state,h)null==C.getDerivedStateFromProps&&null!=p.componentWillMount&&p.componentWillMount(),null!=p.componentDidMount&&p.__h.push(p.componentDidMount);else{if(null==C.getDerivedStateFromProps&&w!==d&&null!=p.componentWillReceiveProps&&p.componentWillReceiveProps(w,k),!p.__e&&null!=p.shouldComponentUpdate&&!1===p.shouldComponentUpdate(w,p.__s,k)){for(p.props=w,p.state=p.__s,p.__d=!1,p.__v=t,t.__e=o.__e,t.__k=o.__k,p.__h.length&&a.push(p),s=0;s<t.__k.length;s++)t.__k[s]&&(t.__k[s].__=t);break e}null!=p.componentWillUpdate&&p.componentWillUpdate(w,p.__s,k),null!=p.componentDidUpdate&&p.__h.push((function(){p.componentDidUpdate(d,y,v)}))}p.context=k,p.props=w,p.state=p.__s,(s=n.__r)&&s(t),p.__d=!1,p.__v=t,p.__P=e,s=p.render(p.props,p.state,p.context),t.__k=j(null!=s&&s.type==b&&null==s.key?s.props.children:s),null!=p.getChildContext&&(r=f(f({},r),p.getChildContext())),h||null==p.getSnapshotBeforeUpdate||(v=p.getSnapshotBeforeUpdate(d,y)),O(e,t,o,r,i,l,a,u,c),p.base=t.__e,p.__h.length&&a.push(p),g&&(p.__E=p.__=null),p.__e=null}else t.__e=x(o.__e,t,o,r,i,l,a,c);(s=n.diffed)&&s(t)}catch(e){n.__e(e,t,o)}return t.__e}function A(e,t){n.__c&&n.__c(t,e),e.some((function(t){try{e=t.__h,t.__h=[],e.some((function(e){e.call(t)}))}catch(e){n.__e(e,t.__v)}}))}function x(e,t,n,o,r,i,l,a){var u,p,f,h,d,y=n.props,b=t.props;if(r="svg"===t.type||r,null==e&&null!=i)for(u=0;u<i.length;u++)if(null!=(p=i[u])&&(null===t.type?3===p.nodeType:p.localName===t.type)){e=p,i[u]=null;break}if(null==e){if(null===t.type)return document.createTextNode(b);e=r?document.createElementNS("http://www.w3.org/2000/svg",t.type):document.createElement(t.type),i=null}if(null===t.type)null!=i&&(i[i.indexOf(e)]=null),y!==b&&e.data!=b&&(e.data=b);else if(t!==n){if(null!=i&&(i=s.slice.call(e.childNodes)),f=(y=n.props||c).dangerouslySetInnerHTML,h=b.dangerouslySetInnerHTML,!a){if(y===c)for(y={},d=0;d<e.attributes.length;d++)y[e.attributes[d].name]=e.attributes[d].value;(h||f)&&(h&&f&&h.__html==f.__html||(e.innerHTML=h&&h.__html||""))}(function(e,t,n,o,r){var i;for(i in n)i in t||C(e,i,null,n[i],o);for(i in t)r&&"function"!=typeof t[i]||"value"===i||"checked"===i||n[i]===t[i]||C(e,i,t[i],n[i],o)})(e,b,y,r,a),t.__k=t.props.children,h||O(e,t,n,o,"foreignObject"!==t.type&&r,i,l,c,a),a||("value"in b&&void 0!==b.value&&b.value!==e.value&&(e.value=null==b.value?"":b.value),"checked"in b&&void 0!==b.checked&&b.checked!==e.checked&&(e.checked=b.checked))}return e}function E(e,t,o){try{"function"==typeof e?e(t):e.current=t}catch(e){n.__e(e,o)}}function D(e,t,o){var r,i,l;if(n.unmount&&n.unmount(e),(r=e.ref)&&(r.current&&r.current!==e.__e||E(r,null,t)),o||"function"==typeof e.type||(o=null!=(i=e.__e)),e.__e=e.__d=null,null!=(r=e.__c)){if(r.componentWillUnmount)try{r.componentWillUnmount()}catch(e){n.__e(e,t)}r.base=r.__P=null}if(r=e.__k)for(l=0;l<r.length;l++)r[l]&&D(r[l],t,o);null!=i&&h(i)}function M(e,t,n){return this.constructor(e,n)}function T(e,t,o){var r,i,l;n.__&&n.__(e,t),i=(r=o===a)?null:o&&o.__k||t.__k,e=d(b,null,[e]),l=[],P(t,(r?t:o||t).__k=e,i||c,c,void 0!==t.ownerSVGElement,o&&!r?[o]:i?null:s.slice.call(t.childNodes),l,o||c,r),A(l,e)}n={__e:function(e,t){for(var n,o;t=t.__;)if((n=t.__c)&&!n.__)try{if(n.constructor&&null!=n.constructor.getDerivedStateFromError&&(o=!0,n.setState(n.constructor.getDerivedStateFromError(e))),null!=n.componentDidCatch&&(o=!0,n.componentDidCatch(e)),o)return w(n.__E=n)}catch(t){e=t}throw e}},o=function(e){return null!=e&&void 0===e.constructor},m.prototype.setState=function(e,t){var n;n=this.__s!==this.state?this.__s:this.__s=f({},this.state),"function"==typeof e&&(e=e(n,this.props)),e&&f(n,e),null!=e&&this.__v&&(this.__e=!1,t&&this.__h.push(t),w(this))},m.prototype.forceUpdate=function(e){this.__v&&(this.__e=!0,e&&this.__h.push(e),w(this))},m.prototype.render=b,r=[],i="function"==typeof Promise?Promise.prototype.then.bind(Promise.resolve()):setTimeout,a=c,u=0,t.render=T,t.hydrate=function(e,t){T(e,t,a)},t.createElement=d,t.h=d,t.Fragment=b,t.createRef=function(){return{}},t.isValidElement=o,t.Component=m,t.cloneElement=function(e,t){return t=f(f({},e.props),t),arguments.length>2&&(t.children=s.slice.call(arguments,2)),y(e.type,t,t.key||e.key,t.ref||e.ref)},t.createContext=function(e){var t={},n={__c:"__cC"+u++,__:e,Consumer:function(e,t){return e.children(t)},Provider:function(e){var o,r=this;return this.getChildContext||(o=[],this.getChildContext=function(){return t[n.__c]=r,t},this.shouldComponentUpdate=function(t){e.value!==t.value&&o.some((function(e){e.context=t.value,w(e)}))},this.sub=function(e){o.push(e);var t=e.componentWillUnmount;e.componentWillUnmount=function(){o.splice(o.indexOf(e),1),t&&t.call(e)}}),e.children}};return n.Consumer.contextType=n,n},t.toChildArray=j,t._e=D,t.options=n},function(e,t,n){var o=n(6);t.regexRule=function(e,t){var n=arguments.length>2&&void 0!==arguments[2]?arguments[2]:function(e){return e[0]};return{type:e,match:function(e){var o=t.exec(e);return null==o||0!==o.index?null:{length:o[0].length,value:n(o)}}}},t.createTokenizer=function(e){var t=e.rules,n=e.shouldStop,r=void 0===n?function(e){return!1}:n;return function(e){var n=0,i=0,l=0,a=e,u=!1;return new o({next:function(){for(;!u&&a.length>0;){var e=null,o=!0,c=!1,s=void 0;try{for(var p,f=t[Symbol.iterator]();!(o=(p=f.next()).done);o=!0){var h=p.value,d=h.type,y=(0,h.match)(a);if(null!=y){var b=y.value;void 0===b&&(b=a.slice(0,y.length)),e={type:d,value:b,row:n,col:i,pos:l,length:y.length};break}}}catch(e){c=!0,s=e}finally{try{o||null==f.return||f.return()}finally{if(c)throw s}}null==e&&(e={type:null,value:a[0],row:n,col:i,pos:l,length:1}),r(e)&&(u=!0);var m=Array.from(a.slice(0,e.length)).map((function(e,t){return"\n"===e?t:null})).filter((function(e){return null!=e}));if(n+=m.length,m.length>0?i=e.length-m.slice(-1)[0]-1:i+=e.length,l+=e.length,a=a.slice(e.length),null==e.type||"_"!==e.type[0])return{value:e,done:!1}}return{done:!0}}})}}},function(e,t,n){var o;function r(e){return(r="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}
/*!
  Copyright (c) 2017 Jed Watson.
  Licensed under the MIT License (MIT), see
  http://jedwatson.github.io/classnames
*/!function(){"use strict";var i={}.hasOwnProperty;function l(){for(var e=[],t=0;t<arguments.length;t++){var n=arguments[t];if(n){var o=r(n);if("string"===o||"number"===o)e.push(n);else if(Array.isArray(n)&&n.length){var a=l.apply(null,n);a&&e.push(a)}else if("object"===o)for(var u in n)i.call(n,u)&&n[u]&&e.push(u)}}return e.join(" ")}e.exports?(l.default=l,e.exports=l):"object"===r(n(5))&&n(5)?void 0===(o=function(){return l}.apply(t,[]))||(e.exports=o):window.classNames=l}()},function(e,t,n){"use strict";var o=function(e){var t=document.createElement("textarea"),n=document.activeElement;t.value=e,t.setAttribute("readonly",""),t.style.contain="strict",t.style.position="absolute",t.style.left="-9999px",t.style.fontSize="12pt";var o=document.getSelection(),r=!1;o.rangeCount>0&&(r=o.getRangeAt(0)),document.body.append(t),t.select(),t.selectionStart=0,t.selectionEnd=e.length;var i=!1;try{i=document.execCommand("copy")}catch(e){}return t.remove(),r&&(o.removeAllRanges(),o.addRange(r)),n&&n.focus(),i};e.exports=o,e.exports.default=o},function(e,t,n){var o,r=function(){var e=String.fromCharCode,t="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+/=",n="ABCDEFGHIJKLMNOPQRSTUVWXYZabcdefghijklmnopqrstuvwxyz0123456789+-$",o={};function r(e,t){if(!o[e]){o[e]={};for(var n=0;n<e.length;n++)o[e][e.charAt(n)]=n}return o[e][t]}var i={compressToBase64:function(e){if(null==e)return"";var n=i._compress(e,6,(function(e){return t.charAt(e)}));switch(n.length%4){default:case 0:return n;case 1:return n+"===";case 2:return n+"==";case 3:return n+"="}},decompressFromBase64:function(e){return null==e?"":""==e?null:i._decompress(e.length,32,(function(n){return r(t,e.charAt(n))}))},compressToUTF16:function(t){return null==t?"":i._compress(t,15,(function(t){return e(t+32)}))+" "},decompressFromUTF16:function(e){return null==e?"":""==e?null:i._decompress(e.length,16384,(function(t){return e.charCodeAt(t)-32}))},compressToUint8Array:function(e){for(var t=i.compress(e),n=new Uint8Array(2*t.length),o=0,r=t.length;o<r;o++){var l=t.charCodeAt(o);n[2*o]=l>>>8,n[2*o+1]=l%256}return n},decompressFromUint8Array:function(t){if(null==t)return i.decompress(t);for(var n=new Array(t.length/2),o=0,r=n.length;o<r;o++)n[o]=256*t[2*o]+t[2*o+1];var l=[];return n.forEach((function(t){l.push(e(t))})),i.decompress(l.join(""))},compressToEncodedURIComponent:function(e){return null==e?"":i._compress(e,6,(function(e){return n.charAt(e)}))},decompressFromEncodedURIComponent:function(e){return null==e?"":""==e?null:(e=e.replace(/ /g,"+"),i._decompress(e.length,32,(function(t){return r(n,e.charAt(t))})))},compress:function(t){return i._compress(t,16,(function(t){return e(t)}))},_compress:function(e,t,n){if(null==e)return"";var o,r,i,l={},a={},u="",c="",s="",p=2,f=3,h=2,d=[],y=0,b=0;for(i=0;i<e.length;i+=1)if(u=e.charAt(i),Object.prototype.hasOwnProperty.call(l,u)||(l[u]=f++,a[u]=!0),c=s+u,Object.prototype.hasOwnProperty.call(l,c))s=c;else{if(Object.prototype.hasOwnProperty.call(a,s)){if(s.charCodeAt(0)<256){for(o=0;o<h;o++)y<<=1,b==t-1?(b=0,d.push(n(y)),y=0):b++;for(r=s.charCodeAt(0),o=0;o<8;o++)y=y<<1|1&r,b==t-1?(b=0,d.push(n(y)),y=0):b++,r>>=1}else{for(r=1,o=0;o<h;o++)y=y<<1|r,b==t-1?(b=0,d.push(n(y)),y=0):b++,r=0;for(r=s.charCodeAt(0),o=0;o<16;o++)y=y<<1|1&r,b==t-1?(b=0,d.push(n(y)),y=0):b++,r>>=1}0==--p&&(p=Math.pow(2,h),h++),delete a[s]}else for(r=l[s],o=0;o<h;o++)y=y<<1|1&r,b==t-1?(b=0,d.push(n(y)),y=0):b++,r>>=1;0==--p&&(p=Math.pow(2,h),h++),l[c]=f++,s=String(u)}if(""!==s){if(Object.prototype.hasOwnProperty.call(a,s)){if(s.charCodeAt(0)<256){for(o=0;o<h;o++)y<<=1,b==t-1?(b=0,d.push(n(y)),y=0):b++;for(r=s.charCodeAt(0),o=0;o<8;o++)y=y<<1|1&r,b==t-1?(b=0,d.push(n(y)),y=0):b++,r>>=1}else{for(r=1,o=0;o<h;o++)y=y<<1|r,b==t-1?(b=0,d.push(n(y)),y=0):b++,r=0;for(r=s.charCodeAt(0),o=0;o<16;o++)y=y<<1|1&r,b==t-1?(b=0,d.push(n(y)),y=0):b++,r>>=1}0==--p&&(p=Math.pow(2,h),h++),delete a[s]}else for(r=l[s],o=0;o<h;o++)y=y<<1|1&r,b==t-1?(b=0,d.push(n(y)),y=0):b++,r>>=1;0==--p&&(p=Math.pow(2,h),h++)}for(r=2,o=0;o<h;o++)y=y<<1|1&r,b==t-1?(b=0,d.push(n(y)),y=0):b++,r>>=1;for(;;){if(y<<=1,b==t-1){d.push(n(y));break}b++}return d.join("")},decompress:function(e){return null==e?"":""==e?null:i._decompress(e.length,32768,(function(t){return e.charCodeAt(t)}))},_decompress:function(t,n,o){var r,i,l,a,u,c,s,p=[],f=4,h=4,d=3,y="",b=[],m={val:o(0),position:n,index:1};for(r=0;r<3;r+=1)p[r]=r;for(l=0,u=Math.pow(2,2),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),l|=(a>0?1:0)*c,c<<=1;switch(l){case 0:for(l=0,u=Math.pow(2,8),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),l|=(a>0?1:0)*c,c<<=1;s=e(l);break;case 1:for(l=0,u=Math.pow(2,16),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),l|=(a>0?1:0)*c,c<<=1;s=e(l);break;case 2:return""}for(p[3]=s,i=s,b.push(s);;){if(m.index>t)return"";for(l=0,u=Math.pow(2,d),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),l|=(a>0?1:0)*c,c<<=1;switch(s=l){case 0:for(l=0,u=Math.pow(2,8),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),l|=(a>0?1:0)*c,c<<=1;p[h++]=e(l),s=h-1,f--;break;case 1:for(l=0,u=Math.pow(2,16),c=1;c!=u;)a=m.val&m.position,m.position>>=1,0==m.position&&(m.position=n,m.val=o(m.index++)),l|=(a>0?1:0)*c,c<<=1;p[h++]=e(l),s=h-1,f--;break;case 2:return b.join("")}if(0==f&&(f=Math.pow(2,d),d++),p[s])y=p[s];else{if(s!==h)return null;y=i+i.charAt(0)}b.push(y),p[h++]=i+y.charAt(0),i=y,0==--f&&(f=Math.pow(2,d),d++)}}};return i}();void 0===(o=function(){return r}.call(t,n,t,e))||(e.exports=o)},function(e,t){(function(t){e.exports=t}).call(this,{})},function(e,t){function n(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}var o=function(){function e(t){!function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,e),this._iterator=t,this._peekedItem=void 0,this._peeked=!1}var t,o,r;return t=e,(o=[{key:Symbol.iterator,value:function(){return this}},{key:"next",value:function(){var e=this._peeked?this._peekedItem:this._iterator.next();return this._peekedItem=void 0,this._peeked=!1,e}},{key:"peek",value:function(){return this._peeked||(this._peekedItem=this._iterator.next(),this._peeked=!0),this._peekedItem.done?void 0:this._peekedItem.value}}])&&n(t.prototype,o),r&&n(t,r),e}();e.exports=o},function(e,t,n){"use strict";n.r(t);var o=n(0),r=n(3),i=n.n(r);function l(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function a(e,t){for(var n=function e(t){return t.reduce((function(t,n){return n instanceof Array?t.push.apply(t,l(e(n))):t.push(n),t}),[])},o=arguments.length,r=new Array(o>2?o-2:0),i=2;i<o;i++)r[i-2]=arguments[i];return{type:e,props:t||{},key:t&&t.key,children:n(r)}}function u(e){return(u="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function c(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function s(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?c(Object(n),!0).forEach((function(t){p(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):c(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function p(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function f(e,t){return!t||"object"!==u(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function h(e){return(h=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function d(e,t){return(d=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function y(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function b(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function m(e,t,n){return t&&b(e.prototype,t),n&&b(e,n),e}function v(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function g(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}var w=['"',",","]"];var _=function(){},O=function(){},j=function(e){function t(e){var n;y(this,t);var o=function e(t){return t.children.reduce((function(t,n){return null==n?t:([_,O].includes(n.type)?t.push(n):t.push.apply(t,v(e(n))),t)}),[])}((n=f(this,h(t).call(this,e))).props);return n.nodes=o.reduce((function(e,t){return t.type===_&&t.key&&t.props.position?(t.key in e?e[t.key]=s({},e[t.key],{props:s({},e[t.key].props,{},t.props)}):e[t.key]=t,e):e}),{}),n.edges=o.reduce((function(t,o){if(o.type!==O||!o.props.from||!o.props.to)return t;var r,i,l,a,u,c,p,f,h,d,y=g(e.co?["to","from"]:["from","to"],2),b=y[0],m=y[1];return o.props[b]in t||(t[o.props[b]]=[]),t[o.props[b]].push(s({},o,{props:s({},o.props,{direction:(r=n.nodes[o.props[b]].props.position,i=n.nodes[o.props[m]].props.position,l=g(r,2),a=l[0],u=l[1],c=g(i,2),p=c[0]-a,f=c[1]-u,h=[p,f].map(Math.sign),d=[["l","","r"],["u","","d"]],[p,f].map((function(e,t){return d[t][h[t]+1].repeat(Math.abs(e))})).join(""))})})),t}),{}),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&d(e,t)}(t,e),m(t,[{key:"getBounds",value:function(){var e=this;return Object.keys(this.nodes).map((function(t){return e.nodes[t].props.position})).reduce((function(e,t){var n=g(e,4),o=n[0],r=n[1],i=n[2],l=n[3],a=g(t,2),u=a[0],c=a[1];return[Math.min(o,u),Math.max(r,u),Math.min(i,c),Math.max(l,c)]}),[1/0,-1/0,1/0,-1/0])}},{key:"toArray",value:function(){var e=g(this.getBounds(),4),t=e[0],n=e[1],o=e[2],r=e[3];if(t>n||o>r)return[];for(var i=Array(r-o+1).fill().map((function(e){return Array(n-t+1).fill(null)})),l=0,a=Object.keys(this.nodes);l<a.length;l++){var u=a[l],c=g(this.nodes[u].props.position,2),s=c[0];i[c[1]-o][s-t]={node:this.nodes[u],edges:this.edges[u]||[]}}return i}},{key:"render",value:function(){var e,t=this,n=null==this.props.options?"":"[".concat(this.props.options,"]"),o=this.toArray().map((function(e){return e.map((function(e){return null==e?"":[(n=e.node.props.value||"",o=g(""===n.trim()||w.some((function(e){return n.includes(e)}))?["{","}"]:["",""],2),r=o[0],i=o[1],"".concat(r).concat(n).concat(i))].concat(v(e.edges.map((function(e){return function(e){var t=arguments.length>1&&void 0!==arguments[1]&&arguments[1],n=e.props,o=n.direction,r=n.alt,i=n.value;if(null==o)return"";var l=e.props.labelPosition||"left";t===!r&&"inside"!==l&&(l="left"===l?"right":"left");var a={left:"",right:"'",inside:" description"}[l],u=null!=i&&w.some((function(e){return i.includes(e)}))?["{","}"]:["",""],c=g(u,2),s=c[0],p=c[1],f=null!=i?'"'.concat(s).concat(i).concat(p,'"').concat(a):null,h=[o?"":null,f].concat(v(e.props.args||[])).filter((function(e){return null!=e})).join(", ");return"\\arrow[".concat(o).concat(h,"]")}(e,t.props.co)})))).join(" ");var n,o,r,i}))}));if((e=[]).concat.apply(e,v(o)).every((function(e){return""===e}))&&(o=o.map((function(e){return e.map((function(e){return"{}"}))}))),this.props.align&&o.length>0)for(var r=function(e){for(var t=Math.max.apply(Math,v(o.map((function(t){return t[e].length})))),n=0;n<o.length;n++)o[n][e]=o[n][e].padEnd(t," ")},i=0;i<o[0].length;i++)r(i);return["\\begin{tikzcd}".concat(n),o.map((function(e){return e.join(" & ")})).join(" \\\\\n"),"\\end{tikzcd}"].join("\n")}}]),t}(function(){function e(t){y(this,e),this.props=t}return m(e,[{key:"render",value:function(){}}]),e}());function k(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function C(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?k(Object(n),!0).forEach((function(t){S(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):k(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function S(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function P(e){if(null==e)return null;if(![j,_,O].includes(e.type)){var t=C({},e.props,{children:e.children});return"render"in e.type.prototype?P(new e.type(t).render()):P(e.type(t))}return C({},e,{children:e.children.map((function(e){return P(e)}))})}function A(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2],o=P(e);return null==o||o.type!==j?null:new j(C({},o.props,{co:n!==!!o.props.co,align:!!t.align&&t.align,children:o.children}))}function x(e){var t=arguments.length>1&&void 0!==arguments[1]?arguments[1]:{},n=arguments.length>2&&void 0!==arguments[2]&&arguments[2];return A(e,t,n).render()}var E=n(4),D=0;function M(){return(D++).toString()}function T(e,t){return e.length===t.length&&e.every((function(e,n){return e===t[n]}))}function I(e,t){return e.map((function(e,n){return e+t[n]}))}function R(e,t){return t.map((function(t){return e*t}))}function B(e,t){return e.map((function(e,n){return e-t[n]}))}var L=n(1);function U(e){return(U="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function z(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function H(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?z(Object(n),!0).forEach((function(t){F(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):z(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function F(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function N(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function J(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function V(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function K(e,t){return!t||"object"!==U(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function W(e){var t="function"==typeof Map?new Map:void 0;return(W=function(e){if(null===e||(n=e,-1===Function.toString.call(n).indexOf("[native code]")))return e;var n;if("function"!=typeof e)throw new TypeError("Super expression must either be null or a function");if(void 0!==t){if(t.has(e))return t.get(e);t.set(e,o)}function o(){return Y(e,arguments,q(this).constructor)}return o.prototype=Object.create(e.prototype,{constructor:{value:o,enumerable:!1,writable:!0,configurable:!0}}),X(o,e)})(e)}function G(){if("undefined"==typeof Reflect||!Reflect.construct)return!1;if(Reflect.construct.sham)return!1;if("function"==typeof Proxy)return!0;try{return Date.prototype.toString.call(Reflect.construct(Date,[],(function(){}))),!0}catch(e){return!1}}function Y(e,t,n){return(Y=G()?Reflect.construct:function(e,t,n){var o=[null];o.push.apply(o,t);var r=new(Function.bind.apply(e,o));return n&&X(r,n.prototype),r}).apply(null,arguments)}function X(e,t){return(X=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}function q(e){return(q=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}var Q=function(e){function t(e){var n,o=arguments.length>1&&void 0!==arguments[1]?arguments[1]:null;return V(this,t),(n=K(this,q(t).call(this))).name="ParseError",n.token=o,n.message=null==o?e:"".concat(e," at line ").concat(o.row+1,", column ").concat(o.col+1),n}return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&X(e,t)}(t,e),t}(W(Error));var $=Object(L.createTokenizer)({rules:[Object(L.regexRule)("_whitespace",/^\s+/),Object(L.regexRule)("comma",/^,/),Object(L.regexRule)("command",/^\\arrow\s*\[/),Object(L.regexRule)("end",/^\]/),Object(L.regexRule)("alt",/^'/),Object(L.regexRule)("direction",/^[lrud]+(?!\w)/),Object(L.regexRule)("argName",/^([a-zA-Z]+ )*[a-zA-Z]+/),Object(L.regexRule)("argValue",/^=(-?\d+(.\d+)?(em)?)/,(function(e){return e[1]})),{type:"label",match:function(e){var t=function(e){if('"'!==e[0])return null;for(var t=1,n=0,o="{"===e[1];t<e.length;){var r=e[t];if('"'===r&&n<=0)break;"\\"===r&&t++,"{"===r&&n++,"}"===r&&0===--n&&'"'!==e[t+1]&&(o=!1),t++}return'"'!==e[t]?null:{match:e.slice(0,t+1),value:o?e.slice(2,t-1):e.slice(1,t),wrapped:o}}(e);return null==t?null:{length:t.match.length,value:t.value}}}],shouldStop:function(e){return"end"===e.type}}),Z=Object(L.createTokenizer)({rules:[Object(L.regexRule)("_whitespace",/^\s+/),Object(L.regexRule)("_comment",/^%.*/),Object(L.regexRule)("begin",/^\\begin\s*{tikzcd}/),Object(L.regexRule)("end",/^\\end\s*{tikzcd}/),{type:"node",match:function(e){var t=function(e){for(var t=0;t<e.length;){var n=e[t];if(["&","%"].includes(n)||[/^\\\\/,/^\\arrow\s*\[/,/^\\end\s*{tikzcd}/].some((function(n){return null!=n.exec(e.slice(t))})))break;"\\"===n&&t++,t++}var o=e.slice(0,t).trim();"\\"===o[o.length-1]&&(o+=e[o.length]);var r="{"===o[0]&&"}"===o[o.length-1];return{match:o,value:r?o.slice(1,-1):o,wrapped:r}}(e),n=t.match,o=t.value;return 0===n.length?null:{length:n.length,value:o}}},{type:"arrow",match:function(e){if(!e.startsWith("\\arrow"))return null;var t=$(e),n=t.next(),o=n.done,r=n.value;if(o||"command"!==r.type)return null;var i=(t=[r].concat(J(t)))[t.length-1];return{length:i.pos+i.length,value:t}}},Object(L.regexRule)("align",/^&/),Object(L.regexRule)("newrow",/^\\\\/)]});function ee(e){var t={direction:[0,0],value:null,labelPosition:"left"},n=[],o={},r=!0,i=!1,l=void 0;try{for(var a,u=e[Symbol.iterator]();!(r=(a=u.next()).done);r=!0){var c=a.value;if(null==c.type)throw new Q("Unexpected token",c);if("direction"===c.type){var s=J(c.value);t.direction=s.reduce((function(e,t){return I(e,{l:[-1,0],r:[1,0],u:[0,-1],d:[0,1]}[t])}),[0,0])}else if("label"===c.type){t.value=c.value;var p=e.next(),f=p.done,h=p.value;f||("alt"===h.type?t.labelPosition="right":"argName"===h.type&&"description"===h.value&&(t.labelPosition="inside"))}else"argName"===c.type?(o.name=c.value,n.push(o)):"argValue"===c.type?o.value=c.value:"alt"===c.type?o.alt=!0:"comma"===c.type&&(o={})}}catch(e){i=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}for(var d=0,y=n;d<y.length;d++){var b=y[d],m=b.name,v=b.value,g=b.alt;Object.assign(t,{"near start":{labelPositionLongitudinal:"nearstart"},"very near start":{labelPositionLongitudinal:"verynearstart"},"near end":{labelPositionLongitudinal:"nearend"},"very near end":{labelPositionLongitudinal:"verynearend"},harpoon:{head:"harpoon".concat(g?"alt":"")},"two heads":{head:"twoheads"},"no head":{head:"none"},Rightarrow:{line:"double"},dashed:{line:"dashed"},dotted:{line:"dotted"},phantom:{labelPosition:"inside",tail:"none",line:"none",head:"none"},hook:{tail:"hook".concat(g?"alt":"")},"maps to":{tail:"mapsto"},"bend left":{bend:null!=v?+v:30},"bend right":{bend:null!=v?-v:-30},"shift left":{shift:null!=v?-v:-1},"shift right":{shift:null!=v?v:1},loop:function(){var e=[0,!1],t=N(["in","out"].map((function(e){var t=n.find((function(t){return t.name===e}));return null==t?null:+t.value})),2),o=t[0],r=t[1];if(null!=o&&null!=r){var i=((o+r)/2+90)%360;e=(r-o+360)%360<180?[i,!0]:[i,!1]}return{loop:e}}()}[m])}return t}function te(e){return function(e){var t=!1,n={nodes:[],edges:[]},o=0,r=0,i=!0,l=!1,a=void 0;try{for(var u,c=e[Symbol.iterator]();!(i=(u=c.next()).done);i=!0){if("begin"===u.value.type){t=!0;break}}}catch(e){l=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw a}}var s=!0,p=!1,f=void 0;try{for(var h,d=e[Symbol.iterator]();!(s=(h=d.next()).done);s=!0){var y=h.value;if(null==y.type)throw new Q("Unexpected token",y);if("end"===y.type)break;if("align"===y.type?o++:"newrow"===y.type&&(o=0,r++),"node"===y.type)n.nodes.push({position:[o,r],value:y.value});else if("arrow"===y.type){var b=y.value,m=!0,v=!1,g=void 0;try{for(var w,_=b[Symbol.iterator]();!(m=(w=_.next()).done);m=!0){var O=w.value,j=N(I([O.row,O.col,O.pos],[y.row,y.col,y.pos]),3);O.row=j[0],O.col=j[1],O.pos=j[2]}}catch(e){v=!0,g=e}finally{try{m||null==_.return||_.return()}finally{if(v)throw g}}if("end"!==b.slice(-1)[0].type)throw new Q("Arrow does not end",y);var k=ee(b[Symbol.iterator]());if(k.loop||!T(k.direction,[0,0])){var C=[o,r],S=H({from:C,to:I(C,k.direction)},k);delete S.direction,n.edges.push(S)}}}}catch(e){p=!0,f=e}finally{try{s||null==d.return||d.return()}finally{if(p)throw f}}var P=function(e){var t=n.nodes.findIndex((function(t){return T(t.position,e)}));return t<0&&(t=n.nodes.length,n.nodes.push({position:e,value:""})),t},A=!0,x=!1,E=void 0;try{for(var D,M=n.edges[Symbol.iterator]();!(A=(D=M.next()).done);A=!0){var R=D.value;R.from=P(R.from),R.to=P(R.to),R.loop&&(R.to=R.from)}}catch(e){x=!0,E=e}finally{try{A||null==M.return||M.return()}finally{if(x)throw E}}if(!t)throw new Q("Did not find tikzcd environment");return n}(Z(e))}function ne(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function oe(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function re(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function ie(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?re(Object(n),!0).forEach((function(t){le(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):re(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function le(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function ae(e){var t=[0,1].map((function(t){return e.nodes.reduce((function(e,n){return Math.min(e,n.position[t])}),1/0)}));return JSON.stringify({nodes:e.nodes.map((function(e){return ie({},e,{id:void 0,position:B(e.position,t)})})),edges:e.edges.map((function(t){return ie({},t,{from:e.nodes.findIndex((function(e){return e.id===t.from})),to:e.nodes.findIndex((function(e){return e.id===t.to}))})}))})}function ue(e){var t=JSON.parse(e),n=t.nodes.map((function(e){return ie({},e,{id:M()})}));return{nodes:n,edges:t.edges.map((function(e){return ie({},e,{from:n[e.from].id,to:n[e.to].id})}))}}function ce(e){return ue((t=e,decodeURIComponent(Array.prototype.map.call(atob(t),(function(e){return"%"+("00"+e.charCodeAt(0).toString(16)).slice(-2)})).join(""))));var t}function se(e){return x(a(j,null,e.nodes.map((function(e,t){return a(_,{key:e.id,position:e.position,value:e.value})})),e.edges.map((function(e){return[a(O,{from:e.from,to:e.to,value:e.value,labelPosition:"none"===e.line?null:e.labelPosition,args:[].concat(oe([e.head,e.line,e.tail,e.labelPositionLongitudinal].map((function(t,n){return{double:"Rightarrow",solid:null,dashed:"dashed",dotted:"dotted",none:["none"===e.line?null:"no head","phantom",null][n],default:null,harpoon:"harpoon",harpoonalt:"harpoon'",hook:"hook",hookalt:"hook'",mapsto:"maps to",tail:"tail",twoheads:"two heads",center:null,nearstart:"near start",nearend:"near end",verynearstart:"very near start",verynearend:"very near end"}[t]}))),[e.bend>0?"bend left=".concat(e.bend).replace(/=30$/,""):e.bend<0?"bend right=".concat(-e.bend).replace(/=30$/,""):null,e.shift<0?"shift left=".concat(-e.shift).replace(/=1$/,""):e.shift>0?"shift right=".concat(e.shift).replace(/=1$/,""):null],oe(null!=e.loop?function(){var t=ne(e.loop||[0,!1],2),n=t[0],o=t[1],r=ne([235,305].map((function(e){return(e+n+360)%360})),2),i=r[0],l=r[1];if(!o){var a=[l,i];i=a[0],l=a[1]}return["loop","distance=2em","in=".concat(i),"out=".concat(l)]}():[])).filter((function(e){return null!=e}))})]}))),{align:!0})}var pe=n(2),fe=n.n(pe);function he(e){return(he="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function de(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function ye(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function be(e,t){return!t||"object"!==he(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function me(e){return(me=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ve(e,t){return(ve=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ge=function(e){function t(){var e,n;de(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=be(this,(e=me(t)).call.apply(e,[this].concat(r)))).submit=function(){var e=n.props.onSubmit;(void 0===e?function(){}:e)({position:n.props.position})},n.handleGrabberMouseDown=function(e){var t=n.props.onGrabberMouseDown,o=void 0===t?function(){}:t;e.position=n.props.position,o(e)},n.handleGrabberDragStart=function(e){e.preventDefault()},n.handleEditSubmit=function(e){e.preventDefault()},n.handleEditKeyDown=function(e){"Enter"===e.key&&(e.stopPropagation(),n.submit())},n.handleInputBlur=function(e){n.submit()},n.stopPropagation=function(e){e.stopPropagation()},n.handleInputChange=function(e){var t=n.props.onChange;(void 0===t?function(){}:t)({position:n.props.position,value:e.currentTarget.value})},n.handleAddLoop=function(e){var t=n.props.onAddLoopClick;(void 0===t?function(){}:t)(e)},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ve(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.componentDidUpdate()}},{key:"shouldComponentUpdate",value:function(e){return e.value!==this.props.value||e.edit!==this.props.edit||e.selected!==this.props.selected}},{key:"componentDidUpdate",value:function(e){var t=this,n=this.props.onTypesetFinish,o=void 0===n?function(){}:n,r=!0,i=!1,l=void 0;try{for(var a,u=this.valueElement.querySelectorAll(['span[id^="MathJax"]',".MathJax_Preview","script"].join(", "))[Symbol.iterator]();!(r=(a=u.next()).done);r=!0)a.value.remove()}catch(e){i=!0,l=e}finally{try{r||null==u.return||u.return()}finally{if(i)throw l}}this.props.value?(MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.valueElement]),MathJax.Hub.Queue((function(){o({position:t.props.position,element:t.valueElement.querySelector(".MathJax_Preview + span")})}))):o({position:this.props.position,element:null}),null!=this.inputElement&&e.edit!==this.props.edit&&this.inputElement.select()}},{key:"render",value:function(){var e=this;return Object(o.h)("li",{class:fe()("grid-cell",{edit:this.props.edit,selected:this.props.selected}),"data-position":this.props.position.join(",")},Object(o.h)("div",{class:"value",ref:function(t){return e.valueElement=t}},this.props.value?"\\(".concat(this.props.value,"\\)"):Object(o.h)("span",{class:"hide"},"_")),this.props.edit&&Object(o.h)("form",{class:"edit",onSubmit:this.handleEditSubmit},Object(o.h)("input",{ref:function(t){return e.inputElement=t},type:"text",value:this.props.value,onBlur:this.handleInputBlur,onInput:this.handleInputChange,onMouseDown:this.stopPropagation,onKeyDown:this.handleEditKeyDown})),Object(o.h)("img",{class:"grabber",src:"./img/grabber.svg",onMouseDown:this.handleGrabberMouseDown,onDragStart:this.handleGrabberDragStart}),Object(o.h)("img",{class:"loop",src:"./img/loop.svg",title:"Create Loop",alt:"Create Loop",onClick:this.handleAddLoop}))}}])&&ye(n.prototype,r),i&&ye(n,i),t}(o.Component);function we(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function _e(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Oe(e,t,n){var o=_e(e,2);return{width:t,height:n,left:o[0]-t/2,top:o[1]-n/2}}function je(e,t,n){var o=e.left,r=e.top,i=e.width,l=e.height,a=_e(t,2),u=a[0],c=a[1],s=_e(n,2),p=[s[0]-u,s[1]-c],f=[o,r];return[u,c].map((function(e,t){return[f[t],f[t]+[i,l][t]].map((function(n){return(n-e)/p[t]}))})).reduce((function(e,t){return[].concat(we(e),we(t))}),[]).filter((function(e){return 0<=e&&e<=1})).map((function(e){return t.map((function(t,n){return t+e*p[n]}))})).filter((function(t){return function(e,t){var n=e.left,o=e.top,r=e.width,i=e.height,l=_e(t,2),a=l[0],u=l[1];return n<=a&&a<=n+r&&o<=u&&u<=o+i}(e,t)}))}function ke(e){return Math.sqrt(e.reduce((function(e,t){return e+t*t}),0))}function Ce(e){return(Ce="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Se(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Pe(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ae(e,t){return!t||"object"!==Ce(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function xe(e){return(xe=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ee(e,t){return(Ee=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var De=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ae(this,xe(t).call(this))).state={labelX:"50%",labelY:0,startPoint:e.from.map((function(t){return t*e.cellSize+e.cellSize/2})),endPoint:e.to.map((function(t){return t*e.cellSize+e.cellSize/2}))},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Ee(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){this.componentWillReceiveProps()}},{key:"shouldComponentUpdate",value:function(e,t){for(var n in e)if(e[n]!==this.props[n])return!0;for(var o in t)if(t[o]instanceof Array&&!T(t[o],this.state[o])||!(t[o]instanceof Array)&&t[o]!==this.state[o])return!0;return!1}},{key:"componentWillReceiveProps",value:function(e){var t=this;null!=e&&e.from===this.props.from&&e.to===this.props.to&&e.fromSize===this.props.fromSize&&e.toSize===this.props.toSize&&e.bend===this.props.bend&&e.shift===this.props.shift&&e.loop===this.props.loop||(null==e&&(e=this.props),MathJax.Hub.Queue((function(){var n=e,o=n.cellSize,r=n.fromSize,i=n.toSize,l=Se(r||[0,0],2),a=l[0],u=l[1],c=Se(i||[0,0],2),s=c[0],p=c[1],f=Se([s,p].map((function(e){return Math.min(o,e+20)})),2);s=f[0],p=f[1];var h=Se([a,u].map((function(e){return Math.min(o,e+20)})),2);a=h[0],u=h[1];var d,y,b=Se([e.from,e.to].map((function(e){return e.map((function(e){return e*o+o/2}))})),2),m=b[0],v=b[1],g=R(.5,I(m,v)),w=B(v,m),_=I(g,R(t.getLengthAngle().length*Math.tan(-(e.bend||0)*Math.PI/180)/2,(d=function(e){var t=_e(e,2),n=t[0];return[-t[1],n]}(w),y=ke(d),d.map((function(e){return e/y}))))),O=Oe(m,a,u),j=Oe(v,s,p),k=je(O,m,_)[0],C=je(j,_,v)[0];t.setState({startPoint:k||m,endPoint:C||v})})))}},{key:"componentDidUpdate",value:function(e,t){var n=this;if(null!=this.valueElement){var o=this.props.onTypesetFinish,r=void 0===o?function(){}:o,i=!0,l=!1,a=void 0;try{for(var u,c=this.valueElement.querySelectorAll(['span[id^="MathJax"]',".MathJax_Preview","script"].join(", "))[Symbol.iterator]();!(i=(u=c.next()).done);i=!0)u.value.remove()}catch(e){l=!0,a=e}finally{try{i||null==c.return||c.return()}finally{if(l)throw a}}this.props.value?(MathJax.Hub.Queue(["Typeset",MathJax.Hub,this.valueElement]),MathJax.Hub.Queue((function(){r({id:n.props.id,element:n.valueElement.querySelector(".MathJax_Preview + span")})}))):r({id:this.props.id,element:null}),MathJax.Hub.Queue((function(){if(n.props!==e||n.state.startPoint!==t.startPoint||n.state.endPoint!==t.endPoint){null==e&&(e=n.props);var o=n.pathElement.getBBox(),r=window.getComputedStyle(n.valueElement),i=r.width,l=r.height,a=Se([i,l].map(parseFloat),2);i=a[0],l=a[1];var u=n.props.labelPosition||"left",c=Se(n.props.loop||[0,!1],2),s=c[0];c[1]&&(u={left:"right",right:"left"}[u]||u);var p=n.getLengthAngle().angle+s*Math.PI/180,f=l*Math.abs(Math.cos(p))+i*Math.abs(Math.sin(p))-l,h=-i/2-(n.props.loop?0:6.5);n.setState({labelX:"calc(50% + ".concat(h,"px)"),labelY:{left:n.props.bend>=0?o.y-l-f/2-5:o.y+o.height-l-f/2-11,right:n.props.bend>0?o.y+f/2+11:o.y+o.height+f/2+5,inside:n.props.bend>0?o.y-l/2:o.y+o.height-l/2}[u]})}}))}}},{key:"getLengthAngle",value:function(){var e=this.state,t=e.startPoint,n=Se(B(e.endPoint,t),2),o=n[0],r=n[1];return{length:ke([o,r]),angle:Math.atan2(r,o)}}},{key:"render",value:function(){var e,t,n,r,i,l,a,u,c,s,p,f=this;if(this.props.loop){if(this.props.phantom)return;var h=Se(this.state.startPoint,2);s=h[0],p=h[1];var d=Se(this.props.loop||[0,!1],2),y=d[0],b=d[1],m=b?-1:1;e=t=109,c=360-y,i=0,u="\n        M ".concat(e/2-14," ").concat(t/2,"\n        a ").concat(24," ").concat(24*.8," 0 1 0 ").concat(28," 0\n      "),n=-e/2-16*Math.sin(c*Math.PI/180),r=16*Math.cos(c*Math.PI/180);var v=180*m/Math.PI,g=Math.PI*b*v,w=(Math.asin(14/24)-Math.PI)*v,_=14*m,O=[e/2-_,t/2],j=[e/2+_,t/2];l={x:e/2-_,y:t/2,transform:"\n          rotate(".concat(g-w," ").concat(O.join(" "),")\n          translate(").concat(-9.764," ").concat(-6.5,")\n        ")},a={x:e/2+_,y:t/2,transform:"\n          rotate(".concat(g+w," ").concat(j.join(" "),")\n          translate(0 ").concat(-6.5,")\n        ")}}else{var k=this.state,C=Se(R(.5,I(k.startPoint,k.endPoint)),2);s=C[0],p=C[1];var S=this.getLengthAngle(),P=S.length;c=180*S.angle/Math.PI,P-=19.528;var A=this.props.bend||0,x=A*Math.PI/180;i=this.props.shift||0;var E=P/2,D=-P*Math.tan(x)/2,M=[P+19.528+13,Math.max(Math.abs(D)+13,13)];n=-(e=M[0])/2,r=0;var T=[9.764,(t=M[1])/2],B=[9.764+P,t/2],L=I(T,[E,D]);u="\n        M ".concat(T.join(" "),"\n        Q ").concat(L.join(" "),"\n        ").concat(B.join(" "),"\n      "),l={x:0,y:t/2-6.5,transform:"rotate(".concat(-A," ").concat(9.764," ").concat(t/2,")")},a={x:P+9.764,y:t/2-6.5,transform:"rotate(".concat(A," ").concat(P+9.764," ").concat(t/2,")")}}return Object(o.h)("li",{"data-id":this.props.id,class:fe()("grid-arrow",{selected:this.props.selected,phantom:this.props.phantom}),style:{height:t,width:e,left:s+n,top:p-t/2+r,transform:"rotate(".concat(c,"deg) translateY(").concat(7*i,"px)")},onClick:this.props.onClick},Object(o.h)("svg",{ref:function(e){return f.svgElement=e},width:e,height:t},Object(o.h)("path",{class:"mouse",fill:"none","stroke-width":"12",stroke:"transparent","stroke-linecap":"square",d:u}),Object(o.h)("g",{ref:function(e){return f.pathElement=e},fill:"none",mask:"double"===this.props.line?"url(#hollowPath".concat(this.props.id,")"):null},Object(o.h)("path",{d:u,stroke:"none"===this.props.line?"transparent":"black","stroke-width":"double"===this.props.line?6:1,"stroke-dasharray":{dashed:"7, 3",dotted:"2, 4"}[this.props.line]}),"double"===this.props.line&&Object(o.h)("mask",{id:"hollowPath".concat(this.props.id),maskUnits:"userSpaceOnUse"},Object(o.h)("rect",{x:"0",y:"0",width:"100%",height:"100%",fill:"white"}),Object(o.h)("path",{d:u,stroke:"black","stroke-width":"4","stroke-linecap":"square"}))),Object(o.h)("image",{x:l.x,y:l.y,width:9.764,height:13,transform:l.transform,xlinkHref:"./img/arrow/".concat(["double"===this.props.line?"double-":"",this.props.tail||"none"].join(""),".svg")}),Object(o.h)("image",{x:a.x,y:a.y,width:9.764,height:13,transform:a.transform,xlinkHref:"./img/arrow/".concat(["double"===this.props.line?"double-":"",this.props.head||"default"].join(""),".svg")})),Object(o.h)("div",{ref:function(e){return f.valueElement=e},class:fe()("value",this.props.labelPosition),style:{left:this.state.labelX,top:this.state.labelY,transform:"rotate(".concat(-c,"deg)")}},this.props.value?"\\(".concat(this.props.value,"\\)"):Object(o.h)("span",{class:"hide"},"_")))}}])&&Pe(n.prototype,r),i&&Pe(n,i),t}(o.Component);function Me(e){return(Me="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Te(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function Ie(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function Re(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function Be(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function Le(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ue(e,t){return!t||"object"!==Me(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ze(e){return(ze=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function He(e,t){return(He=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Fe=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=Ue(this,ze(t).call(this,e))).handleNodeMouseDown=function(e){if(0===e.button){var t=n.props.cameraPosition,o=n.coordsToPosition([e.clientX,e.clientY]),r=n.props.data.nodes.findIndex((function(e){return T(e.position,o)})),i=n.props.data.nodes[r];n.mouseDown={evt:e,cameraPosition:t,position:o,nodeIndex:r,node:i,mode:n.props.mode}}},n.handleCellGrabberMouseDown=function(e){if(0===e.button){e.stopPropagation();var t=e.position,o=n.props.data.nodes.findIndex((function(e){return T(e.position,t)})),r=n.props.data.nodes[o];n.mouseDown={evt:e,position:t,nodeIndex:o,node:r,mode:"move"}}},n.handleCellAddLoopClick=function(e){if(0===e.button){e.stopPropagation();var t=Be(n.props.data.nodes),o=n.coordsToPosition([e.clientX,e.clientY]),r=t.find((function(e){return T(e.position,o)}));null==r&&t.push(r={id:M(),position:o,value:""});var i=[].concat(Be(n.props.data.edges),[{from:r.id,to:r.id,loop:[0,!1],labelPosition:"right"}]),l=n.props.onDataChange;(void 0===l?function(){}:l)({data:{nodes:t,edges:i}})}},n.handleNodeMouseUp=function(e){if(null!=n.mouseDown){var t=n.mouseDown.evt;if(e.clientX===t.clientX&&e.clientY===t.clientY){var o=n.mouseDown.position,r=n.props.onCellClick;(void 0===r?function(){}:r)({position:o})}}},n.handleCellChange=function(e){var t=n.props.onDataChange,o=void 0===t?function(){}:t,r=Be(n.props.data.nodes),i=r.findIndex((function(t){return T(t.position,e.position)}));if(i<0)""!==e.value.trim()&&r.push({id:M(),position:e.position,value:e.value});else{var l=r[i].id;if(r[i]={id:l,position:Be(e.position),value:e.value},""===e.value.trim())n.props.data.edges.find((function(e){return e.from===l||e.to===l}))||(r[i]=null)}o({data:{nodes:r.filter((function(e){return null!=e})),edges:n.props.data.edges}})},n.handleTypesetFinish=function(e){if(null!=e.element){var t=e.element.getBoundingClientRect();n.setState((function(n){return{cellTypesetSizes:Object.assign(n.cellTypesetSizes,Re({},e.position.join(","),[t.width,t.height]))}}))}else delete n.state.cellTypesetSizes[e.position.join(",")]},n.handleEdgeClick=function(e){return null==n.edgeClickHandlersCache&&(n.edgeClickHandlersCache={}),null==n.edgeClickHandlersCache[e]&&(n.edgeClickHandlersCache[e]=function(t){var o=n.props.onArrowClick,r=void 0===o?function(){}:o;t.edge=e,r(t)}),n.edgeClickHandlersCache[e]},n.state={width:0,height:0,phantomArrow:null,cellTypesetSizes:{}},n}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&He(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;this.updateSize(),window.addEventListener("resize",(function(){return e.updateSize()})),document.addEventListener("mouseup",(function(){e.mouseDown=null;var t=e.state.phantomArrow;if(null!=t){if(!T(t.from,t.to)){var n=Be(e.props.data.nodes),o=Ie([t.from,t.to].map((function(e){return n.find((function(t){return T(t.position,e)}))})),2),r=o[0],i=o[1];null==r&&n.push(r={id:M(),position:t.from,value:""}),null==i&&n.push(i={id:M(),position:t.to,value:""});var l=[].concat(Be(e.props.data.edges),[{from:r.id,to:i.id}]),a=e.props.onDataChange;(void 0===a?function(){}:a)({data:{nodes:n,edges:l}})}e.setState({phantomArrow:null})}})),document.addEventListener("mousemove",(function(t){if(null!=e.mouseDown){t.preventDefault();var n=e.coordsToPosition([t.clientX,t.clientY]);if("pan"===e.mouseDown.mode){var o=e.mouseDown.evt,r=[o.clientX,o.clientY],i=B([t.clientX,t.clientY],r),l=e.props.onPan;(void 0===l?function(){}:l)({cameraPosition:B(e.mouseDown.cameraPosition,i)})}else if("move"===e.mouseDown.mode){var a=e.mouseDown.nodeIndex;if(a<0)return;if(null!=e.props.data.nodes.find((function(e){return T(e.position,n)})))return;var u=e.props.onDataChange;(void 0===u?function(){}:u)({selectedCell:n,data:{nodes:e.props.data.nodes.map((function(e,t){return t!==a?e:function(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?Te(Object(n),!0).forEach((function(t){Re(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):Te(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}({},e,{position:n})})),edges:e.props.data.edges}})}else if("arrow"===e.mouseDown.mode){var c=e.mouseDown.position,s=n;if(null!=e.state.phantomArrow&&T(c,e.state.phantomArrow.from)&&T(s,e.state.phantomArrow.to))return;e.setState({phantomArrow:T(c,s)?null:{from:c,to:s}})}}}))}},{key:"componentDidUpdate",value:function(e){var t=this;if(null==this.props.selectedCell||null!=e.selectedCell&&T(e.selectedCell,this.props.selectedCell)){if(null!=this.props.selectedArrow&&(null==e.selectedArrow||e.selectedArrow!==this.props.selectedArrow)){var n=this.props.data.edges[this.props.selectedArrow],o=[n.from,n.to].map((function(e){return t.props.data.nodes.find((function(t){return t.id===e})).position})).reduce((function(e,t){return I(e,t)}),[0,0]).map((function(e){return Math.round(e/2)}));this.panCellIntoView(o)}}else this.panCellIntoView(this.props.selectedCell)}},{key:"updateSize",value:function(){var e=this.element.getBoundingClientRect(),t=e.width,n=e.height;this.setState({width:t,height:n})}},{key:"getViewportRect",value:function(){return{width:this.state.width,height:this.state.height,left:this.props.cameraPosition[0],top:this.props.cameraPosition[1]}}},{key:"coordsToPosition",value:function(e){var t=this;return e.map((function(e,n){return Math.floor((e+t.props.cameraPosition[n])/t.props.cellSize)}))}},{key:"positionToRect",value:function(e){var t=Ie(e,2),n=t[0],o=t[1];return{width:this.props.cellSize,height:this.props.cellSize,left:n*this.props.cellSize,top:o*this.props.cellSize}}},{key:"panCellIntoView",value:function(e){var t=this.props.onPan,n=void 0===t?function(){}:t,o=this.positionToRect(e),r=this.getViewportRect(),i=Ie(this.props.cameraPosition,2),l=i[0],a=i[1];o.left<r.left?l=o.left:o.left+o.width>r.left+r.width&&(l=o.left+o.width-r.width),o.top<r.top?a=o.top:o.top+o.height>r.top+r.height&&(a=o.top+o.height-r.height),n({cameraPosition:[l,a]})}},{key:"render",value:function(){var e=this;if(null==this.state.width)return Object(o.h)("section",{ref:function(t){return e.element=t},id:"grid"});var t=this.props,n=t.cellSize,r=t.cameraPosition,i=this.state.cellTypesetSizes,l=[this.state.width,this.state.height],a=Ie(r.map((function(e){return Math.floor(e/n)})),2),u=a[0],c=a[1],s=Ie(r.map((function(e,t){return Math.floor((e+l[t])/n)})),2),p=s[0],f=s[1],h=p-u+1,d=f-c+1,y=Ie(B(R(n,[u,c]),r),2),b=y[0],m=y[1];return Object(o.h)("section",{ref:function(t){return e.element=t},id:"grid",class:this.props.mode},Object(o.h)("ol",{style:{gridTemplateColumns:"repeat(".concat(h,", ").concat(n,"px)"),gridTemplateRows:"repeat(".concat(d,", ").concat(n,"px)"),left:b,top:m,width:h*n,height:d*n},onMouseDown:this.handleNodeMouseDown,onMouseUp:this.handleNodeMouseUp},Array(d).fill().map((function(t,r){return Array(h).fill().map((function(e,t){return[t+u,r+c]})).map((function(t){var r=null!=e.props.selectedCell&&T(t,e.props.selectedCell),i=e.props.data.nodes.find((function(e){return T(e.position,t)}));return Object(o.h)(ge,{key:t.join(","),position:t,size:n,selected:r,edit:r&&e.props.cellEditMode,value:i&&i.value,onGrabberMouseDown:e.handleCellGrabberMouseDown,onAddLoopClick:e.handleCellAddLoopClick,onSubmit:e.props.onCellSubmit,onChange:e.handleCellChange,onTypesetFinish:e.handleTypesetFinish})}))}))),Object(o.h)("ul",{style:{left:-r[0],top:-r[1]}},this.props.data.edges.map((function(t,r){var l=e.props.data.nodes,a=l.find((function(e){return e.id===t.from})).position,u=l.find((function(e){return e.id===t.to})).position;return Object(o.h)(De,{cellSize:n,id:r.toString(),from:a,to:u,fromSize:i[a.join(",")],toSize:i[u.join(",")],selected:e.props.selectedArrow===r,bend:t.bend,shift:t.shift,loop:t.loop,tail:t.tail,line:t.line,head:t.head,value:t.value,labelPosition:t.labelPosition,onClick:e.handleEdgeClick(r)})})),this.state.phantomArrow&&Object(o.h)(De,{cellSize:n,phantom:!0,from:this.state.phantomArrow.from,to:this.state.phantomArrow.to,fromSize:i[this.state.phantomArrow.from.join(",")],toSize:i[this.state.phantomArrow.to.join(",")]})))}}])&&Le(n.prototype,r),i&&Le(n,i),t}(o.Component);function Ne(e){return(Ne="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function Je(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}function Ve(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ke(e,t,n){return t&&Ve(e.prototype,t),n&&Ve(e,n),e}function We(e,t){return!t||"object"!==Ne(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function Ge(e){return(Ge=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function Ye(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&Xe(e,t)}function Xe(e,t){return(Xe=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var qe=function(e){function t(){var e,n;Je(this,t);for(var o=arguments.length,r=new Array(o),i=0;i<o;i++)r[i]=arguments[i];return(n=We(this,(e=Ge(t)).call.apply(e,[this].concat(r)))).handleClick=function(e){e.preventDefault();var t=n.props.onClick;(void 0===t?function(){}:t)(e)},n}return Ye(t,e),Ke(t,[{key:"render",value:function(){var e=this.props,t=e.checked,n=e.disabled,r=e.icon,i=e.name;return Object(o.h)("li",{class:fe()("button",this.props.class,{checked:t,disabled:n}),title:i},Object(o.h)("a",{href:"#",onClick:this.handleClick},Object(o.h)("img",{style:{backgroundImage:"url('".concat(r,"')")},src:"./img/tools/blank.svg",alt:i})))}}]),t}(o.Component),Qe=function(){return Object(o.h)("li",{class:"separator"},"Separator")},$e=function(e){function t(){return Je(this,t),We(this,Ge(t).apply(this,arguments))}return Ye(t,e),Ke(t,[{key:"render",value:function(){return Object(o.h)("section",{class:fe()("toolbox",this.props.class),id:this.props.id},Object(o.h)("ul",null,this.props.children))}}]),t}(o.Component);function Ze(e){return(Ze="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function et(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function tt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function nt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?tt(Object(n),!0).forEach((function(t){ot(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):tt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function ot(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function rt(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function it(e,t){return!t||"object"!==Ze(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function lt(e){return(lt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function at(e,t){return(at=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var ut=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=it(this,lt(t).call(this))).handleButtonClick=function(t){return null==e.buttonClickHandlersCache&&(e.buttonClickHandlersCache={}),null==e.buttonClickHandlersCache[t]&&(e.buttonClickHandlersCache[t]=function(n){var o,r,i,l=e.props,a=l.data,u=l.onChange,c=void 0===u?function(){}:u,s={};if(["tail","mapsto","twoheads"].includes(t)){var p="twoheads"===t?"head":"tail";s=ot({},p,a[p]===t?"none":t)}else if("head"===t)s={head:null==a.head?"none":null};else if(["double","solid","dashed","dotted"].includes(t))"double"===(s={line:(a.line||"solid")===t?"none":t}).line?s=nt({},s,{},[null,"none"].includes(a.head)?{}:{head:null},{},[null,"mapsto","none"].includes(a.tail)?{}:{tail:"none"}):"none"===s.line&&(s=nt({},s,{head:"none",tail:"none",labelPosition:"inside"}));else if(["labelleft","labelright","labelinside"].includes(t))s={labelPosition:"none"===a.line?"inside":t.slice(5)};else if(["hook","harpoon"].includes(t)){var f="hook"===t?"tail":"head",h=[t,"".concat(t,"alt"),"none"],d=(h.indexOf(a[f])+1)%h.length;s=ot({},f,h[d])}else if(["bendleft","bendright"].includes(t)){if(null!=a.loop)return;var y=a.bend,b=void 0===y?0:y,m=0===b||("bendleft"===t?b>0:b<0),v=0!==b?Math.sign(b):"bendleft"===t?1:-1,g=[0,30,49,60,67,71,74,76,78,79,80],w=g.reduce((function(e,t,n){return t<=Math.abs(b)?n:e}),-1);w<g.length-1&&b>=(g[w+1]+g[w])/2&&w++;var _=v*g[Math.min(w+(2*+m-1),g.length-1)];s={bend:(o=-80,r=80,i=_,Math.max(o,Math.min(r,i)))}}else if(["shiftleft","shiftright"].includes(t)){if(null!=a.loop)return;var O=a.shift;s={shift:(void 0===O?0:O)+("shiftright"===t?1:-1)}}else if(["reversearrow"].includes(t)){var j=a.from,k=a.to,C=a.labelPosition;if(s={to:j,from:k},null!=C){var S=C;"left"===C?S="right":"right"===C&&(S="left"),s.labelPosition=S}if(null!=a.bend&&(s.bend=-a.bend),null!=a.shift&&(s.shift=-a.shift),null!=a.loop){var P=et(a.loop,2),A=P[0],x=P[1];s.loop=[A,!x]}}else if(["rotate"].includes(t)){if(null==a.loop)return;var E=et(a.loop,2),D=E[0],M=E[1];s.loop=[(D+90)%360,M]}c({data:nt({},a,{},s)})}),e.buttonClickHandlersCache[t]},e.handleEditButtonClick=function(){e.updateEditPosition(),e.setState({edit:!0})},e.handleFormSubmit=function(t){t.preventDefault(),e.setState({edit:!1})},e.handleInputBlur=function(){e.setState({edit:!1})},e.handleInputChange=function(t){var n=t.currentTarget.value,o=e.props.onChange;(void 0===o?function(){}:o)({data:nt({},e.props.data,{value:n})})},e.handleInputKeyDown=function(e){e.stopPropagation()},e.handleInputKeyUp=function(t){"Escape"===t.key&&(t.stopPropagation(),e.setState({edit:!1}))},e.state={edit:!1,editTop:0,editLeft:0},e}var n,r,i;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&at(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this;document.addEventListener("keydown",(function(t){if(!t.ctrlKey&&!t.metaKey&&e.props.show&&!e.state.edit){var n={ArrowUp:t.shiftKey?"bendleft":"shiftleft",ArrowDown:t.shiftKey?"bendright":"shiftright",r:"reversearrow",a:"labelleft",s:"labelinside",d:"labelright",e:"rotate"};if(null!=n[t.key])t.preventDefault(),e.handleButtonClick(n[t.key])();else if(["Delete","Backspace"].includes(t.key)){t.preventDefault();var o=e.props.onRemoveClick;(void 0===o?function(){}:o)(t)}else"Enter"==t.key&&(t.preventDefault(),e.handleEditButtonClick())}}))}},{key:"shouldComponentUpdate",value:function(e,t){return e.show!==this.props.show||e.data!==this.props.data||t.edit!==this.state.edit||t.editTop!==this.state.editTop||t.editLeft!==this.state.editLeft}},{key:"componentDidUpdate",value:function(e,t){!t.edit&&this.state.edit?this.inputElement.select():t.edit&&!this.state.edit&&this.inputElement.blur()}},{key:"updateEditPosition",value:function(){var e=document.querySelector('.grid-arrow[data-id="'.concat(this.props.edgeId,'"] .value')).getBoundingClientRect(),t=e.left,n=e.top,o=e.width,r=window.getComputedStyle(this.editElement),i=r.width,l=r.height;this.setState({editLeft:t+o/2-parseFloat(i)/2,editTop:n-parseFloat(l)-10})}},{key:"render",value:function(){var e=this,t=null==this.props.data?{}:this.props.data;return Object(o.h)("section",{id:"properties",class:fe()({show:this.props.show,edit:this.state.edit})},Object(o.h)($e,null,Object(o.h)(qe,{checked:!1,icon:"./img/properties/reverse.svg",name:"Reverse Arrow (R)",onClick:this.handleButtonClick("reversearrow")}),Object(o.h)(Qe,null),Object(o.h)(qe,{checked:"tail"===t.tail,disabled:["none","double"].includes(t.line),icon:"./img/properties/tail.svg",name:"Tail",onClick:this.handleButtonClick("tail")}),Object(o.h)(qe,{checked:"mapsto"===t.tail,disabled:["none"].includes(t.line),icon:"./img/properties/mapsto.svg",name:"Maps To",onClick:this.handleButtonClick("mapsto")}),Object(o.h)(qe,{checked:["hook","hookalt"].includes(t.tail),disabled:["none","double"].includes(t.line),icon:"./img/properties/".concat("hookalt"===t.tail?"hookalt":"hook",".svg"),name:"Hook",onClick:this.handleButtonClick("hook")}),Object(o.h)(Qe,null),Object(o.h)(qe,{checked:"dotted"===t.line,icon:"./img/properties/dotted.svg",name:"Dotted",onClick:this.handleButtonClick("dotted")}),Object(o.h)(qe,{checked:"dashed"===t.line,icon:"./img/properties/dashed.svg",name:"Dashed",onClick:this.handleButtonClick("dashed")}),Object(o.h)(qe,{checked:!t.line||"solid"===t.line,icon:"./img/properties/solid.svg",name:"Solid",onClick:this.handleButtonClick("solid")}),Object(o.h)(qe,{checked:"double"===t.line,icon:"./img/properties/double.svg",name:"Double",onClick:this.handleButtonClick("double")}),Object(o.h)(Qe,null),null==t.loop?Object(o.h)(o.Fragment,null,Object(o.h)(qe,{key:"shiftright",icon:"./img/properties/shiftright.svg",name:"Shift Right (Down Arrow)",onClick:this.handleButtonClick("shiftright")}),Object(o.h)(qe,{key:"shiftleft",icon:"./img/properties/shiftleft.svg",name:"Shift Left (Up Arrow)",onClick:this.handleButtonClick("shiftleft")}),Object(o.h)(qe,{key:"bendright",icon:"./img/properties/bendright.svg",name:"Bend Right (Shift+Down Arrow)",onClick:this.handleButtonClick("bendright")}),Object(o.h)(qe,{key:"bendleft",icon:"./img/properties/bendleft.svg",name:"Bend Left (Shift+Up Arrow)",onClick:this.handleButtonClick("bendleft")})):Object(o.h)(o.Fragment,null,Object(o.h)(qe,{key:"rotate",icon:"./img/properties/rotate.svg",name:"Rotate (E)",onClick:this.handleButtonClick("rotate")})),Object(o.h)(Qe,null),Object(o.h)(qe,{checked:["harpoon","harpoonalt"].includes(t.head),disabled:["none","double"].includes(t.line),icon:"./img/properties/".concat("harpoonalt"===t.head?"harpoonalt":"harpoon",".svg"),name:"Harpoon",onClick:this.handleButtonClick("harpoon")}),Object(o.h)(qe,{checked:null==t.head,disabled:["none"].includes(t.line),icon:"./img/properties/head.svg",name:"Default Head",onClick:this.handleButtonClick("head")}),Object(o.h)(qe,{checked:"twoheads"==t.head,disabled:["none","double"].includes(t.line),icon:"./img/properties/twoheads.svg",name:"Two Heads",onClick:this.handleButtonClick("twoheads")}),Object(o.h)(Qe,null),Object(o.h)(qe,{checked:!t.labelPosition||"left"===t.labelPosition,disabled:["none"].includes(t.line),icon:"./img/properties/labelleft.svg",name:"Left Label (A)",onClick:this.handleButtonClick("labelleft")}),Object(o.h)(qe,{checked:"inside"===t.labelPosition,icon:"./img/properties/labelinside.svg",name:"Inside Label (S)",onClick:this.handleButtonClick("labelinside")}),Object(o.h)(qe,{checked:"right"===t.labelPosition,disabled:["none"].includes(t.line),icon:"./img/properties/labelright.svg",name:"Right Label (D)",onClick:this.handleButtonClick("labelright")}),Object(o.h)(qe,{checked:this.state.edit,icon:"./img/properties/edit.svg",name:"Edit Label (Enter)",onClick:this.handleEditButtonClick}),Object(o.h)(Qe,null),Object(o.h)(qe,{class:"remove",icon:"./img/properties/trash.svg",name:"Remove Arrow (Del)",onClick:this.props.onRemoveClick})),Object(o.h)("form",{ref:function(t){return e.editElement=t},class:"edit",style:{left:this.state.editLeft,top:this.state.editTop},onSubmit:this.handleFormSubmit},Object(o.h)("input",{ref:function(t){return e.inputElement=t},type:"text",value:t.value||"",onBlur:this.handleInputBlur,onInput:this.handleInputChange,onKeyDown:this.handleInputKeyDown,onKeyUp:this.handleInputKeyUp})))}}])&&rt(n.prototype,r),i&&rt(n,i),t}(o.Component);function ct(e){return(ct="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function st(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function pt(e,t){return!t||"object"!==ct(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function ft(e){return(ft=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function ht(e,t){return(ht=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var dt=function(e){function t(e){var n;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(n=pt(this,ft(t).call(this,e))).handleOverlayMouseDown=function(e){if(e.target===e.currentTarget){var t=n.props.onClose;(void 0===t?function(){}:t)(e)}},n.handleCopyClick=function(){i()(n.props.code),n.textareaElement.focus(),n.textareaElement.select()},n}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&ht(e,t)}(t,e),n=t,(r=[{key:"componentDidUpdate",value:function(e){!e.show&&this.props.show&&(this.textareaElement.focus(),this.textareaElement.select())}},{key:"render",value:function(){var e=this,t=this.props,n=t.show,r=t.code;return Object(o.h)("section",{id:"modal-overlay",class:fe()({show:n}),onMouseDown:this.handleOverlayMouseDown},Object(o.h)("section",{class:"modal-box code-box"},Object(o.h)("textarea",{ref:function(t){return e.textareaElement=t},value:r,onInput:this.props.onCodeInput}),Object(o.h)("ul",{class:"buttons"},Object(o.h)("li",null,Object(o.h)("button",{onClick:this.handleCopyClick},"Copy")),Object(o.h)("li",{class:"separator"}),Object(o.h)("li",null,Object(o.h)("button",{onClick:this.props.onParseButtonClick},"Parse")),Object(o.h)("li",null,Object(o.h)("button",{onClick:this.props.onClose},"Close")))))}}])&&st(n.prototype,r),l&&st(n,l),t}(o.Component);function yt(e){return(yt="function"==typeof Symbol&&"symbol"==typeof Symbol.iterator?function(e){return typeof e}:function(e){return e&&"function"==typeof Symbol&&e.constructor===Symbol&&e!==Symbol.prototype?"symbol":typeof e})(e)}function bt(e,t){return function(e){if(Array.isArray(e))return e}(e)||function(e,t){if(!(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e)))return;var n=[],o=!0,r=!1,i=void 0;try{for(var l,a=e[Symbol.iterator]();!(o=(l=a.next()).done)&&(n.push(l.value),!t||n.length!==t);o=!0);}catch(e){r=!0,i=e}finally{try{o||null==a.return||a.return()}finally{if(r)throw i}}return n}(e,t)||function(){throw new TypeError("Invalid attempt to destructure non-iterable instance")}()}function mt(e){return function(e){if(Array.isArray(e)){for(var t=0,n=new Array(e.length);t<e.length;t++)n[t]=e[t];return n}}(e)||function(e){if(Symbol.iterator in Object(e)||"[object Arguments]"===Object.prototype.toString.call(e))return Array.from(e)}(e)||function(){throw new TypeError("Invalid attempt to spread non-iterable instance")}()}function vt(e,t){var n=Object.keys(e);if(Object.getOwnPropertySymbols){var o=Object.getOwnPropertySymbols(e);t&&(o=o.filter((function(t){return Object.getOwnPropertyDescriptor(e,t).enumerable}))),n.push.apply(n,o)}return n}function gt(e){for(var t=1;t<arguments.length;t++){var n=null!=arguments[t]?arguments[t]:{};t%2?vt(Object(n),!0).forEach((function(t){wt(e,t,n[t])})):Object.getOwnPropertyDescriptors?Object.defineProperties(e,Object.getOwnPropertyDescriptors(n)):vt(Object(n)).forEach((function(t){Object.defineProperty(e,t,Object.getOwnPropertyDescriptor(n,t))}))}return e}function wt(e,t,n){return t in e?Object.defineProperty(e,t,{value:n,enumerable:!0,configurable:!0,writable:!0}):e[t]=n,e}function _t(e,t){for(var n=0;n<t.length;n++){var o=t[n];o.enumerable=o.enumerable||!1,o.configurable=!0,"value"in o&&(o.writable=!0),Object.defineProperty(e,o.key,o)}}function Ot(e,t){return!t||"object"!==yt(t)&&"function"!=typeof t?function(e){if(void 0===e)throw new ReferenceError("this hasn't been initialised - super() hasn't been called");return e}(e):t}function jt(e){return(jt=Object.setPrototypeOf?Object.getPrototypeOf:function(e){return e.__proto__||Object.getPrototypeOf(e)})(e)}function kt(e,t){return(kt=Object.setPrototypeOf||function(e,t){return e.__proto__=t,e})(e,t)}var Ct=function(e){function t(){var e;return function(e,t){if(!(e instanceof t))throw new TypeError("Cannot call a class as a function")}(this,t),(e=Ot(this,jt(t).call(this))).parseDiagramFromUrl=function(){if(window.location.hash.length>0){try{return e=window.location.hash.slice(1),ue(Object(E.decompressFromEncodedURIComponent)(e))}catch(e){}try{return ce(window.location.hash.slice(1))}catch(e){alert("Invalid diagram permalink.")}}var e;return{nodes:[],edges:[]}},e.resetCamera=function(){e.setState({cameraPosition:Array(2).fill(-Math.floor(e.state.cellSize/2)),selectedCell:[0,0],selectedArrow:null})},e.handlePan=function(t){var n=t.cameraPosition;e.setState({cameraPosition:n})},e.generateLink=function(){var t,n=(t=e.state.diagram,Object(E.compressToEncodedURIComponent)(ae(t)));return window.location.href.split("#")[0]+"#"+n},e.copyLink=function(){if(!e.state.confirmLinkCopy){var t=e.generateLink();window.history.pushState(null,null,t),i()(t)?(e.setState({confirmLinkCopy:!0}),setTimeout((function(){return e.setState({confirmLinkCopy:!1})}),1e3)):prompt("Copy link down below:",t)}},e.openCodeBox=function(){var t="% ".concat(e.generateLink(),"\n").concat(se(e.state.diagram));e.setState({codeValue:t,showCodeBox:!0,selectedArrow:null})},e.handleCloseCodeBox=function(){e.setState({showCodeBox:!1})},e.handleCodeInput=function(t){e.setState({codeValue:t.currentTarget.value})},e.handleParseCode=function(){var t,n=se(e.state.diagram),o=e.state.codeValue,r=e.state.diagram;if(n!==o)try{t=te(o),r=ue(JSON.stringify(t)),e.resetCamera(),e.setState({showCodeBox:!1}),e.handleDataChange({data:r})}catch(e){alert("Could not parse code.\n\nReason: ".concat(e.message))}},e.moveInHistory=function(t){null!=e.history[e.historyPointer+t]&&(e.historyPointer+=t,e.setState({diagram:e.history[e.historyPointer].diagram,selectedArrow:null}))},e.undo=function(){return e.moveInHistory(-1)},e.redo=function(){return e.moveInHistory(1)},e.handleDataChange=function(t){var n=e.state.diagram.edges.length+1===t.data.edges.length,o={diagram:t.data,time:Date.now()};(e.historyPointer<e.history.length-1||Date.now()-e.history[e.historyPointer].time>500)&&e.history[e.historyPointer].diagram!==t.data?(e.history.splice(e.historyPointer+1,e.history.length,o),e.historyPointer=e.history.length-1):e.history[e.historyPointer]=o,e.setState((function(e){return gt({diagram:t.data,selectedArrow:n?t.data.edges.length-1:e.selectedArrow},null!=t.selectedCell?{selectedCell:t.selectedCell,selectedArrow:null}:{})}))},e.handleCellClick=function(t){e.setState({selectedCell:t.position,selectedArrow:null,cellEditMode:!0})},e.handleCellSubmit=function(t){e.setState({cellEditMode:!1})},e.handleArrowClick=function(t){e.setState({selectedArrow:e.state.selectedArrow===t.edge?null:t.edge})},e.handleToolClick=function(t){return null==e.toolClickHandlersCache&&(e.toolClickHandlersCache={}),null==e.toolClickHandlersCache[t]&&(e.toolClickHandlersCache[t]=function(n){e.setState({tool:t,selectedArrow:null})}),e.toolClickHandlersCache[t]},e.handleAboutClick=function(){Object(o.render)(Object(o.h)("a",{ref:function(e){e&&(e.click(),e.remove())},href:"https://github.com/yishn/tikzcd-editor",target:"_blank"}),document.createElement("div"))},e.handleEdgeChange=function(t){var n=mt(e.state.diagram.edges);n[e.state.selectedArrow]=gt({},n[e.state.selectedArrow],{},t.data),null!=t.data.value&&""===t.data.value.trim()&&delete n[e.state.selectedArrow].value,e.handleDataChange({data:{nodes:e.state.diagram.nodes,edges:n}})},e.handleEdgeRemoveClick=function(){var t=e.state.diagram.edges.filter((function(t,n){return n!==e.state.selectedArrow})),n=e.state.diagram.nodes.filter((function(e){return""!==e.value.trim()||t.some((function(t){return t.from===e.id||t.to===e.id}))}));e.handleDataChange({data:{nodes:n,edges:t}}),e.setState({selectedArrow:null})},e.state={tool:"pan",cellSize:130,diagram:{nodes:[],edges:[]},cameraPosition:[-65,-65],selectedCell:[0,0],selectedArrow:null,cellEditMode:!1,confirmLinkCopy:!1,showCodeBox:!1},e.state.diagram=e.parseDiagramFromUrl(),e.history=[{diagram:e.state.diagram,time:Date.now()}],e.historyPointer=0,e}var n,r,l;return function(e,t){if("function"!=typeof t&&null!==t)throw new TypeError("Super expression must either be null or a function");e.prototype=Object.create(t&&t.prototype,{constructor:{value:e,writable:!0,configurable:!0}}),t&&kt(e,t)}(t,e),n=t,(r=[{key:"componentDidMount",value:function(){var e=this,t={Shift:"arrow"," ":"pan"},n={ArrowLeft:[-1,0],ArrowRight:[1,0],ArrowUp:[0,-1],ArrowDown:[0,1]};document.addEventListener("keydown",(function(o){if(null!=t[o.key]){if(null!=e.prevTool)return;e.prevTool=e.state.tool,e.setState({tool:t[o.key]})}else if(Object.keys(n).includes(o.key))e.setState((function(e){return e.showCodeBox||e.cellEditMode||null!=e.selectedArrow?null:{selectedCell:I(e.selectedCell,n[o.key])}}));else if("Tab"===o.key&&null!=e.state.selectedArrow){o.preventDefault(),o.stopPropagation();var r=o.shiftKey?-1:1;e.setState((function(e){if(null!=e.selectedArrow){var t=e.diagram,n=t.nodes,o=t.edges,i=o.length,l=function(e){return n.find((function(t){return t.id===e})).position},a=mt(Array(i)).map((function(e,t){return[t,[o[t].from,o[t].to].map(l).reduce((function(e,t){return I(e,t)}),[0,0])]})).sort((function(e,t){var n=bt(e,2),o=(n[0],n[1]),r=bt(t,2);return r[0],function e(t,n){return t.length!=n.length?t.length-n.length:0===t.length?0:t[0]<n[0]?-1:t[0]>n[0]?1:e(t.slice(1),n.slice(1))}(o,r[1])})).map((function(e){var t=bt(e,2),n=t[0];return t[1],n})),u=a.indexOf(e.selectedArrow);return{selectedArrow:a[((u+r)%i+i)%i]}}}))}else"Enter"===o.key&&e.setState((function(e){return e.showCodeBox||e.cellEditMode||null!=e.selectedArrow?null:{cellEditMode:!0}}))})),document.addEventListener("keyup",(function(n){if(Object.keys(t).includes(n.key)){if(null==e.prevTool)return;e.setState({tool:e.prevTool}),e.prevTool=null}else"Escape"===n.key&&e.setState((function(e){return e.showCodeBox?{showCodeBox:!1}:null!=e.selectedArrow?{selectedArrow:null}:e.cellEditMode?{cellEditMode:!1}:null}))})),window.addEventListener("popstate",(function(t){e.handleDataChange({data:e.parseDiagramFromUrl()}),e.resetCamera()})),window.addEventListener("beforeunload",(function(t){if(e.state.diagram.nodes.length>0||e.state.diagram.edges.length>0){var n="Do you really want to leave?";return t.returnValue=n,n}}))}},{key:"render",value:function(){return Object(o.h)("div",{id:"root"},Object(o.h)(Fe,{cellSize:this.state.cellSize,cameraPosition:this.state.cameraPosition,data:this.state.diagram,mode:this.state.tool,selectedCell:null==this.state.selectedArrow?this.state.selectedCell:null,selectedArrow:this.state.selectedArrow,cellEditMode:this.state.cellEditMode,onPan:this.handlePan,onDataChange:this.handleDataChange,onCellClick:this.handleCellClick,onCellSubmit:this.handleCellSubmit,onArrowClick:this.handleArrowClick}),Object(o.h)(ut,{edgeId:this.state.selectedArrow,show:null!=this.state.selectedArrow,data:this.state.diagram.edges[this.state.selectedArrow],onChange:this.handleEdgeChange,onRemoveClick:this.handleEdgeRemoveClick}),Object(o.h)($e,{id:"toolbox"},Object(o.h)(qe,{checked:"pan"===this.state.tool,icon:"./img/tools/pan.svg",name:"Pan Tool (Space)",onClick:this.handleToolClick("pan")}),Object(o.h)(qe,{checked:"arrow"===this.state.tool,icon:"./img/tools/arrow.svg",name:"Arrow Tool (Shift)",onClick:this.handleToolClick("arrow")}),Object(o.h)(Qe,null),Object(o.h)(qe,{disabled:null==this.history[this.historyPointer-1],icon:"./img/tools/undo.svg",name:"Undo",onClick:this.undo}),Object(o.h)(qe,{disabled:null==this.history[this.historyPointer+1],icon:"./img/tools/redo.svg",name:"Redo",onClick:this.redo}),Object(o.h)(Qe,null),Object(o.h)(qe,{checked:this.state.showCodeBox,icon:"./img/tools/code.svg",name:"Open Code",onClick:this.openCodeBox}),Object(o.h)(qe,{icon:"./img/tools/".concat(this.state.confirmLinkCopy?"tick":"link",".svg"),name:"Copy Diagram Permalink",onClick:this.copyLink}),Object(o.h)(Qe,null),Object(o.h)(qe,{icon:"./img/tools/about.svg",name:"GitHub Repository",onClick:this.handleAboutClick})),Object(o.h)(dt,{code:this.state.codeValue,show:this.state.showCodeBox,onCodeInput:this.handleCodeInput,onParseButtonClick:this.handleParseCode,onClose:this.handleCloseCodeBox}))}}])&&_t(n.prototype,r),l&&_t(n,l),t}(o.Component);MathJax.Hub.processSectionDelay=0,MathJax.Hub.processUpdateDelay=0,MathJax.Hub.Config({messageStyle:"none",skipStartupTypeset:!0,showMathMenu:!1,errorSettings:{message:[""]}}),Object(o.render)(Object(o.h)(Ct,null),document.body)}]);
//# sourceMappingURL=bundle.js.map